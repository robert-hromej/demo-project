# Фази розробки

## Огляд

Розробка RecipeMatch поділена на **9 фаз**, що просуваються від налаштування проєкту до розгортання у продакшені.

| # | Фаза | Статус | Опис |
|---|------|--------|------|
| 1 | Ініціалізація проєкту | Заплановано | Налаштування Rails застосунку, геми, конфігурація |
| 2 | Моделі бази даних | Заплановано | Міграції, моделі, сіди |
| 3 | Сервіси dry-rb | Заплановано | Контракти, сервіси, базові класи |
| 4 | API ендпоінти | Заплановано | Реалізація Grape API |
| 5 | Налаштування фронтенду | Заплановано | React, Vite, TypeScript |
| 6 | Функції пошуку | Заплановано | Пошук за інгредієнтами та бюджетом |
| 7 | Рейтинги та відгуки | Заплановано | Система рейтингів користувачів |
| 8 | Тестування та оптимізація | Заплановано | Повне покриття тестами, продуктивність |
| 9 | Інтеграція з супермаркетами | Майбутнє | Інтеграція цін Сільпо/АТБ |

---

## Фаза 1: Ініціалізація проєкту

### Цілі
- Створити застосунок Rails 8.1.2
- Налаштувати базу даних PostgreSQL
- Встановити всі необхідні геми
- Налаштувати інструменти розробки

### Завдання

- [x] Створити Rails API застосунок
- [ ] Налаштувати PostgreSQL в `database.yml`
- [ ] Встановити та налаштувати геми:
  - [ ] Стек Grape API
  - [ ] dry-rb (monads, validation)
  - [ ] Автентифікація (jwt, bcrypt)
  - [ ] Утиліти (pagy, money-rails, ancestry)
- [ ] Налаштувати RuboCop
- [ ] Налаштувати RSpec з допоміжними файлами
- [ ] Налаштувати Vite Rails
- [ ] Налаштувати Git хуки (опціонально)

### Результати
- Працюючий Rails застосунок
- Всі геми встановлені
- Лінтинг налаштований
- Тести можуть запускатися (порожній набір)

---

## Фаза 2: Моделі бази даних

### Цілі
- Створити всі міграції бази даних
- Реалізувати моделі ActiveRecord
- Додати початкові дані (сіди)

### Завдання

#### Міграції
- [ ] Створити таблицю `users`
- [ ] Створити таблицю `categories` з ancestry
- [ ] Створити таблицю `ingredients`
- [ ] Створити таблицю `recipes`
- [ ] Створити з'єднувальну таблицю `recipe_ingredients`
- [ ] Створити таблицю `ratings`
- [ ] Додати індекси та зовнішні ключі

#### Моделі
- [ ] Модель `User` з автентифікацією
- [ ] Модель `Category` з ancestry
- [ ] Модель `Ingredient` з money
- [ ] Модель `Recipe` з енамами
- [ ] Модель `RecipeIngredient`
- [ ] Модель `Rating` з валідаціями

#### Сіди
- [ ] Сіди категорій (ієрархічні)
- [ ] Сіди поширених інгредієнтів
- [ ] Сіди зразкових рецептів
- [ ] Сіди тестових користувачів

### Результати
- Всі міграції створені та виконані
- Моделі з валідаціями
- Сіди для розробки

---

## Фаза 3: Налаштування сервісів dry-rb

### Цілі
- Налаштувати інфраструктуру dry-monads
- Створити контракти валідації
- Реалізувати сервісні об'єкти

### Завдання

#### Інфраструктура
- [ ] Створити базовий клас `ApplicationService`
- [ ] Створити базовий клас `ApplicationContract`
- [ ] Налаштувати i18n для dry-validation
- [ ] Налаштувати спільні приклади для тестів

#### Контракти
- [ ] `Users::CreateContract`
- [ ] `Users::UpdateContract`
- [ ] `Categories::CreateContract`
- [ ] `Categories::UpdateContract`
- [ ] `Ingredients::CreateContract`
- [ ] `Ingredients::UpdateContract`
- [ ] `Recipes::CreateContract`
- [ ] `Recipes::UpdateContract`
- [ ] `Ratings::CreateContract`

#### Сервіси
- [ ] `Users::Create`
- [ ] `Users::Authenticate`
- [ ] `Categories::Create`, `Update`, `Delete`
- [ ] `Ingredients::Create`, `Update`, `Delete`
- [ ] `Recipes::Create`, `Update`, `Delete`
- [ ] `Recipes::Search`
- [ ] `Recipes::SearchByIngredients`
- [ ] `Recipes::SearchByBudget`
- [ ] `Recipes::CalculateCost`
- [ ] `Ratings::Create`, `Delete`
- [ ] `Ratings::RecalculateAverage`

### Результати
- Всі контракти з правилами валідації
- Всі сервіси з dry-monads
- Тести сервісів зі 100% покриттям

---

## Фаза 4: API ендпоінти

### Цілі
- Реалізувати ендпоінти Grape API
- Створити серіалізатори сутностей
- Налаштувати middleware автентифікації

### Завдання

#### Інфраструктура
- [ ] Підключити Grape API в роутах
- [ ] Створити `BaseEndpoint` з хелперами
- [ ] Налаштувати JWT автентифікацію
- [ ] Налаштувати Swagger документацію

#### Ендпоінти
- [ ] Ендпоінти автентифікації (register, login, me)
- [ ] CRUD категорій
- [ ] CRUD інгредієнтів
- [ ] CRUD рецептів
- [ ] Рейтинги (вкладені під рецептами)
- [ ] Ендпоінти пошуку

#### Сутності
- [ ] `UserEntity`
- [ ] `CategoryEntity` (з дочірніми)
- [ ] `IngredientEntity`
- [ ] `RecipeEntity` (список та повна)
- [ ] `RecipeIngredientEntity`
- [ ] `RatingEntity`

### Результати
- Всі API ендпоінти функціональні
- Swagger документація
- Request спеки зі 100% покриттям

---

## Фаза 5: Налаштування фронтенду

### Цілі
- Налаштувати Vite з React 19
- Налаштувати TypeScript та Tailwind
- Створити базові компоненти

### Завдання

#### Конфігурація
- [ ] Налаштувати Vite для Rails
- [ ] Налаштувати TypeScript
- [ ] Налаштувати Tailwind CSS
- [ ] Налаштувати ESLint та Prettier
- [ ] Налаштувати Vitest

#### Базове налаштування
- [ ] Створити API клієнт
- [ ] Налаштувати React Router
- [ ] Налаштувати Zustand стори
- [ ] Створити TypeScript типи

#### Базові компоненти
- [ ] Компоненти макету
- [ ] UI компоненти (Button, Input, Select, Modal, Table)
- [ ] Error boundary
- [ ] Стани завантаження

### Результати
- Працююча збірка фронтенду
- Бібліотека базових компонентів
- Маршрутизація налаштована

---

## Фаза 6: Функції пошуку

### Цілі
- Реалізувати пошук за інгредієнтами
- Реалізувати пошук за бюджетом
- Створити UI пошуку

### Завдання

#### Бекенд
- [ ] Оптимізувати запит співставлення інгредієнтів
- [ ] Реалізувати розрахунок відсотка співпадіння
- [ ] Реалізувати фільтрацію за бюджетом
- [ ] Додати розрахунок вартості порції
- [ ] Кешувати часті запити

#### Фронтенд
- [ ] Компонент вибору інгредієнтів
- [ ] Компонент введення бюджету
- [ ] Сторінка результатів пошуку
- [ ] Компонент картки рецепту
- [ ] Відображення відсутніх інгредієнтів

### Результати
- Працюючий пошук за інгредієнтами
- Працюючий пошук за бюджетом
- UI пошуку з фільтрами

---

## Фаза 7: Рейтинги та відгуки

### Цілі
- Реалізувати систему рейтингів
- Додати функціональність відгуків
- Відображати рейтинги в UI

### Завдання

#### Бекенд
- [ ] Логіка створення/оновлення рейтингу
- [ ] Перерахунок середнього рейтингу
- [ ] Обробка тексту відгуку
- [ ] Історія рейтингів користувача

#### Фронтенд
- [ ] Компонент зіркового рейтингу
- [ ] Форма відгуку
- [ ] Відображення списку відгуків
- [ ] Сторінка рейтингів користувача

### Результати
- Користувачі можуть оцінювати рецепти
- Користувачі можуть залишати відгуки
- Відображається середній рейтинг

---

## Фаза 8: Тестування та оптимізація

### Цілі
- Досягти 95%+ покриття тестами
- Оптимізувати продуктивність
- Виправити баги

### Завдання

#### Тестування
- [ ] Специфікації моделей (100%)
- [ ] Специфікації контрактів (100%)
- [ ] Специфікації сервісів (100%)
- [ ] Request специфікації (100%)
- [ ] Тести фронтенд компонентів
- [ ] E2E тести (опціонально)

#### Продуктивність
- [ ] Оптимізація запитів до бази даних
- [ ] Додати індекси бази даних
- [ ] Реалізувати кешування
- [ ] Оптимізувати відповіді API
- [ ] Оптимізація бандлу фронтенду

#### Документація
- [ ] Оновити API документацію
- [ ] Коментарі в коді
- [ ] Оновити README

### Результати
- 95%+ покриття тестами
- Досягнуті показники продуктивності
- Код готовий до продакшену

---

## Фаза 9: Інтеграція з супермаркетами (Майбутнє)

### Цілі
- Інтегруватися з API Сільпо
- Інтегруватися з API АТБ
- Ціни в реальному часі

### Завдання

#### Дослідження
- [ ] Документація API Сільпо
- [ ] Документація API АТБ
- [ ] Юридичні міркування

#### Реалізація
- [ ] Клієнт зовнішнього API
- [ ] Сервіс синхронізації цін
- [ ] Оновлення цін інгредієнтів
- [ ] Генерація списку покупок
- [ ] Посилання на магазини

### Результати
- Ціни в реальному часі з супермаркетів
- Список покупок з посиланнями на магазини

---

## Орієнтовний графік

| Фаза | Орієнтовна тривалість |
|------|----------------------|
| Фаза 1 | 1-2 дні |
| Фаза 2 | 2-3 дні |
| Фаза 3 | 3-4 дні |
| Фаза 4 | 2-3 дні |
| Фаза 5 | 3-4 дні |
| Фаза 6 | 3-4 дні |
| Фаза 7 | 2-3 дні |
| Фаза 8 | 3-5 днів |
| **Загалом MVP** | **~3-4 тижні** |
| Фаза 9 | Уточнюється |

---

## Критерії успіху

### MVP завершено коли:
- [ ] Користувач може шукати рецепти за інгредієнтами
- [ ] Користувач може шукати рецепти за бюджетом
- [ ] Користувач може переглядати деталі рецепту
- [ ] Користувач може оцінювати рецепти
- [ ] 95%+ покриття тестами
- [ ] Час відповіді API < 200мс
- [ ] Час відповіді пошуку < 500мс

---

## Пов'язана документація

- [01-project-overview.md](01-project-overview.md) - Огляд проєкту
- [02-tech-stack.md](02-tech-stack.md) - Технологічний стек
- [03-database-schema.md](03-database-schema.md) - Структура бази даних
- [04-api-specification.md](04-api-specification.md) - Документація API
- [06-dry-rb-patterns.md](06-dry-rb-patterns.md) - Патерни dry-monads
- [07-frontend-patterns.md](07-frontend-patterns.md) - Патерни React
