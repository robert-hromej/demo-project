# Фази розробки

## Огляд

Розробка RecipeMatch поділена на **9 фаз**, що просуваються від налаштування проєкту до розгортання у продакшені.

| # | Фаза | Статус | Опис |
|---|------|--------|------|
| 1 | Ініціалізація проєкту | Завершено | Налаштування Rails застосунку, геми, конфігурація |
| 2 | Моделі бази даних | Завершено | Міграції, моделі, сіди |
| 3 | Сервіси dry-rb | Завершено | Контракти, сервіси, базові класи |
| 4 | API ендпоінти | Завершено | Реалізація Grape API |
| 5 | Налаштування фронтенду | Завершено | React, Vite, TypeScript |
| 6 | Функції пошуку | Завершено | Пошук за інгредієнтами та бюджетом |
| 7 | Рейтинги та відгуки | Завершено | Система рейтингів користувачів |
| 8 | Тестування та оптимізація | Завершено | Покриття тестами, деплой Railway |
| 9 | Інтеграція з супермаркетами | Майбутнє | Інтеграція цін Сільпо/АТБ |

---

## Фаза 1: Ініціалізація проєкту

### Цілі
- Створити застосунок Rails 8.1.2
- Налаштувати базу даних PostgreSQL
- Встановити всі необхідні геми
- Налаштувати інструменти розробки

### Завдання

- [x] Створити Rails API застосунок
- [x] Налаштувати PostgreSQL в `database.yml`
- [x] Встановити та налаштувати геми:
  - [x] Стек Grape API
  - [x] dry-rb (monads, validation)
  - [x] Автентифікація (jwt, bcrypt)
  - [x] Утиліти (money-rails, ancestry)
- [x] Налаштувати RuboCop
- [x] Налаштувати RSpec з допоміжними файлами
- [x] Налаштувати Vite Rails
- [x] Налаштувати Git хуки (опціонально)

### Результати
- Працюючий Rails застосунок
- Всі геми встановлені
- Лінтинг налаштований
- Тести можуть запускатися (порожній набір)

---

## Фаза 2: Моделі бази даних

### Цілі
- Створити всі міграції бази даних
- Реалізувати моделі ActiveRecord
- Додати початкові дані (сіди)

### Завдання

#### Міграції
- [x] Створити таблицю `users`
- [x] Створити таблицю `categories` з ancestry
- [x] Створити таблицю `ingredients`
- [x] Створити таблицю `recipes`
- [x] Створити з'єднувальну таблицю `recipe_ingredients`
- [x] Створити таблицю `ratings`
- [x] Додати індекси та зовнішні ключі

#### Моделі
- [x] Модель `User` з автентифікацією
- [x] Модель `Category` з ancestry
- [x] Модель `Ingredient` з money
- [x] Модель `Recipe` з енамами
- [x] Модель `RecipeIngredient`
- [x] Модель `Rating` з валідаціями

#### Сіди
- [x] Сіди категорій (ієрархічні)
- [x] Сіди поширених інгредієнтів
- [x] Сіди зразкових рецептів
- [x] Сіди тестових користувачів

### Результати
- Всі міграції створені та виконані
- Моделі з валідаціями
- Сіди для розробки

---

## Фаза 3: Налаштування сервісів dry-rb

### Цілі
- Налаштувати інфраструктуру dry-monads
- Створити контракти валідації
- Реалізувати сервісні об'єкти

### Завдання

#### Інфраструктура
- [x] Створити базовий клас `ApplicationService`
- [x] Створити базовий клас `ApplicationContract`
- [x] Налаштувати i18n для dry-validation
- [x] Налаштувати спільні приклади для тестів

#### Контракти
- [x] `Users::CreateContract`
- [x] `Users::UpdateContract`
- [x] `Categories::CreateContract`
- [x] `Categories::UpdateContract`
- [x] `Ingredients::CreateContract`
- [x] `Ingredients::UpdateContract`
- [x] `Recipes::CreateContract`
- [x] `Recipes::UpdateContract`
- [x] `Ratings::CreateContract`

#### Сервіси
- [x] `Users::Create`
- [x] `Users::Authenticate`
- [x] `Categories::Create`, `Update`, `Delete`
- [x] `Ingredients::Create`, `Update`, `Delete`
- [x] `Recipes::Create`, `Update`, `Delete`
- [x] `Recipes::Search`
- [x] `Recipes::SearchByIngredients`
- [x] `Recipes::SearchByBudget`
- [x] `Recipes::CalculateCost`
- [x] `Ratings::Create`, `Delete`
- [x] `Ratings::RecalculateAverage`

### Результати
- Всі контракти з правилами валідації
- Всі сервіси з dry-monads
- Тести сервісів зі 100% покриттям

---

## Фаза 4: API ендпоінти

### Цілі
- Реалізувати ендпоінти Grape API
- Створити серіалізатори сутностей
- Налаштувати middleware автентифікації

### Завдання

#### Інфраструктура
- [x] Підключити Grape API в роутах
- [x] Створити `BaseEndpoint` з хелперами
- [x] Налаштувати JWT автентифікацію
- [x] Налаштувати Swagger документацію

#### Ендпоінти
- [x] Ендпоінти автентифікації (register, login, me)
- [x] CRUD категорій
- [x] CRUD інгредієнтів
- [x] CRUD рецептів
- [x] Рейтинги (вкладені під рецептами)
- [x] Ендпоінти пошуку

#### Сутності
- [x] `UserEntity`
- [x] `CategoryEntity` (з дочірніми)
- [x] `IngredientEntity`
- [x] `RecipeEntity` (список та повна)
- [x] `RecipeIngredientEntity`
- [x] `RatingEntity`

### Результати
- Всі API ендпоінти функціональні
- Swagger документація
- Request спеки зі 100% покриттям

---

## Фаза 5: Налаштування фронтенду

### Цілі
- Налаштувати Vite з React 19
- Налаштувати TypeScript та Tailwind
- Створити базові компоненти

### Завдання

#### Конфігурація
- [x] Налаштувати Vite для Rails
- [x] Налаштувати TypeScript
- [x] Налаштувати Tailwind CSS
- [x] Налаштувати ESLint та Prettier
- [x] Налаштувати Vitest

#### Базове налаштування
- [x] Створити API клієнт
- [x] Налаштувати React Router
- [x] Налаштувати Zustand стори
- [x] Створити TypeScript типи

#### Базові компоненти
- [x] Компоненти макету
- [x] UI компоненти (Button, Input, Select, Modal, Table)
- [x] Error boundary
- [x] Стани завантаження

### Результати
- Працююча збірка фронтенду
- Бібліотека базових компонентів
- Маршрутизація налаштована

---

## Фаза 6: Функції пошуку

### Цілі
- Реалізувати пошук за інгредієнтами
- Реалізувати пошук за бюджетом
- Створити UI пошуку

### Завдання

#### Бекенд
- [x] Оптимізувати запит співставлення інгредієнтів
- [x] Реалізувати розрахунок відсотка співпадіння
- [x] Реалізувати фільтрацію за бюджетом
- [x] Додати розрахунок вартості порції
- [x] Кешувати часті запити

#### Фронтенд
- [x] Компонент вибору інгредієнтів
- [x] Компонент введення бюджету
- [x] Сторінка результатів пошуку
- [x] Компонент картки рецепту
- [x] Відображення відсутніх інгредієнтів

### Результати
- Працюючий пошук за інгредієнтами
- Працюючий пошук за бюджетом
- UI пошуку з фільтрами

---

## Фаза 7: Рейтинги та відгуки

### Цілі
- Реалізувати систему рейтингів
- Додати функціональність відгуків
- Відображати рейтинги в UI

### Завдання

#### Бекенд
- [x] Логіка створення/оновлення рейтингу
- [x] Перерахунок середнього рейтингу
- [x] Обробка тексту відгуку
- [x] Історія рейтингів користувача

#### Фронтенд
- [x] Компонент зіркового рейтингу
- [x] Форма відгуку
- [x] Відображення списку відгуків
- [x] Сторінка рейтингів користувача

### Результати
- Користувачі можуть оцінювати рецепти
- Користувачі можуть залишати відгуки
- Відображається середній рейтинг

---

## Фаза 8: Тестування та оптимізація

### Цілі
- Досягти 95%+ покриття тестами
- Оптимізувати продуктивність
- Виправити баги

### Завдання

#### Тестування
- [x] Специфікації моделей (100%)
- [x] Специфікації контрактів (100%)
- [x] Специфікації сервісів (100%)
- [x] Request специфікації (100%)
- [x] Тести фронтенд компонентів
- [x] E2E тести (опціонально)

#### Продуктивність
- [x] Оптимізація запитів до бази даних
- [x] Додати індекси бази даних
- [x] Реалізувати кешування
- [x] Оптимізувати відповіді API
- [x] Оптимізація бандлу фронтенду

#### Документація
- [x] Оновити API документацію
- [x] Коментарі в коді
- [x] Оновити README

### Результати
- 95%+ покриття тестами
- Досягнуті показники продуктивності
- Код готовий до продакшену

---

## Фаза 9: Інтеграція з супермаркетами (Майбутнє)

### Цілі
- Інтегруватися з API Сільпо
- Інтегруватися з API АТБ
- Ціни в реальному часі

### Завдання

#### Дослідження
- [ ] Документація API Сільпо
- [ ] Документація API АТБ
- [ ] Юридичні міркування

#### Реалізація
- [ ] Клієнт зовнішнього API
- [ ] Сервіс синхронізації цін
- [ ] Оновлення цін інгредієнтів
- [ ] Генерація списку покупок
- [ ] Посилання на магазини

### Результати
- Ціни в реальному часі з супермаркетів
- Список покупок з посиланнями на магазини

---

## Орієнтовний графік

| Фаза | Орієнтовна тривалість |
|------|----------------------|
| Фаза 1 | 1-2 дні |
| Фаза 2 | 2-3 дні |
| Фаза 3 | 3-4 дні |
| Фаза 4 | 2-3 дні |
| Фаза 5 | 3-4 дні |
| Фаза 6 | 3-4 дні |
| Фаза 7 | 2-3 дні |
| Фаза 8 | 3-5 днів |
| **Загалом MVP** | **~3-4 тижні** |
| Фаза 9 | Уточнюється |

---

## Критерії успіху

### MVP завершено коли:
- [ ] Користувач може шукати рецепти за інгредієнтами
- [ ] Користувач може шукати рецепти за бюджетом
- [ ] Користувач може переглядати деталі рецепту
- [ ] Користувач може оцінювати рецепти
- [ ] 95%+ покриття тестами
- [ ] Час відповіді API < 200мс
- [ ] Час відповіді пошуку < 500мс

---

## Пов'язана документація

- [01-project-overview.md](01-project-overview.md) - Огляд проєкту
- [02-tech-stack.md](02-tech-stack.md) - Технологічний стек
- [03-database-schema.md](03-database-schema.md) - Структура бази даних
- [04-api-specification.md](04-api-specification.md) - Документація API
- [06-dry-rb-patterns.md](06-dry-rb-patterns.md) - Патерни dry-monads
- [07-frontend-patterns.md](07-frontend-patterns.md) - Патерни React
